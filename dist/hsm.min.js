!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("namespace-diff")):"function"==typeof define&&define.amd?define(["namespace-diff"],b):a.Hsm=b(a.namespaceDiff)}(this,function(a){"use strict";var b=function(){var a=void 0===arguments[0]?{}:arguments[0];this._states={};var b=a.states;for(var c in b)this.setState(c,b[c])};b.getParentStateName=function(a){return a?a.substring(0,a.lastIndexOf(".")):void 0},b.prototype.setState=function(a,b){a&&this._validateStateName(a),this._states[a]=b},b.prototype.getState=function(a){return this._states[a]},b.prototype.hasState=function(a){return!!this._states[a]},b.prototype.currentStateName=function(){return this._currentStateName},b.prototype.currentState=function(){return this._states[this._currentStateName]},b.prototype.transitionTo=function(b){if(this.currentState()!==b&&this.hasState(b)){var c=!1,d=function(){c=!0},e=b+".index";this.hasState(e)&&(b=e);var f;f=this.currentState()?a(this.currentStateName(),b):{outStates:[],inStates:b.split(".")};var g=this;return Promise.resolve(this.transition(f,d)).then(function(){return c?!1:void(g._currentStateName=b)})}},b.prototype.transition=function(){},b.prototype._validateStateName=function(a){if(!this._isValidStateName(a))throw new Error("A parent state must exist to register "+a)},b.prototype._isValidStateName=function(a){return this.hasState(b.getParentStateName(a))};var c=b;return c});
//# sourceMappingURL=hsm.min.js.map